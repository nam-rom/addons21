/*!
 * AMBOSS Anki Add-on
 * 
 * Copyright (C) 2019-2020 AMBOSS MD Inc. <https://www.amboss.com/us>
 * 
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version, with the additions
 * listed at the end of the license file that accompanied this program.
 * 
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 * 
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <https://www.gnu.org/licenses/>.
 * 
 */
var ambossAddon="object"==typeof ambossAddon?ambossAddon:{};ambossAddon.analytics=function(Q){var F={};function B(n){if(F[n])return F[n].exports;var U=F[n]={i:n,l:!1,exports:{}};return Q[n].call(U.exports,U,U.exports,B),U.l=!0,U.exports}return B.m=Q,B.c=F,B.d=function(Q,F,n){B.o(Q,F)||Object.defineProperty(Q,F,{enumerable:!0,get:n})},B.r=function(Q){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Q,"__esModule",{value:!0})},B.t=function(Q,F){if(1&F&&(Q=B(Q)),8&F)return Q;if(4&F&&"object"==typeof Q&&Q&&Q.__esModule)return Q;var n=Object.create(null);if(B.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:Q}),2&F&&"string"!=typeof Q)for(var U in Q)B.d(n,U,function(F){return Q[F]}.bind(null,U));return n},B.n=function(Q){var F=Q&&Q.__esModule?function(){return Q.default}:function(){return Q};return B.d(F,"a",F),F},B.o=function(Q,F){return Object.prototype.hasOwnProperty.call(Q,F)},B.p="",B(B.s=1)}([,function(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"track\", function() { return track; });\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// disable cookies\ndocument.__defineGetter__('cookie', function () {\n  return '';\n});\n\n!function () {\n  var analytics = window.analytics = window.analytics || [];\n\n  if (!analytics.initialize && !analytics.invoked) {\n    analytics.invoked = !0;\n    analytics.methods = ['reset', 'setAnonymousId', 'identify', 'track', 'page'];\n\n    analytics.factory = function (t) {\n      return function () {\n        var e = Array.prototype.slice.call(arguments);\n        e.unshift(t);\n        analytics.push(e);\n        return analytics;\n      };\n    };\n\n    for (var t = 0; t < analytics.methods.length; t++) {\n      var e = analytics.methods[t];\n      analytics[e] = analytics.factory(e);\n    }\n\n    analytics.load = function (token, options, endpoint) {\n      var n = document.createElement('script');\n      n.type = 'text/javascript';\n      n.async = !0;\n      n.src = endpoint + token + '/a.min.js';\n      var a = document.getElementsByTagName('script')[0];\n      a.parentNode.insertBefore(n, a);\n      analytics._loadOptions = options;\n    };\n\n    analytics.SNIPPET_VERSION = '4.1.0';\n    analytics.load(\"JabXayKea69oVRQrDghBRiGJ3g7pdHdP\", {\n      integrations: {\n        All: false,\n        'Segment.io': true\n      }\n    }, \"https://www.amboss.com/us/api/sprx/cdn/\");\n  }\n}();\n\nconst ambossAnkiVersion = () => {\n  return new Promise(resolve => {\n    pycmd('amboss:version:ankiVersion', result => {\n      resolve(result || 'unknown');\n    });\n  });\n};\n\nconst ambossAddonVersion = () => {\n  return new Promise(resolve => {\n    pycmd('amboss:version:addonVersion', result => {\n      resolve(result || 'unknown');\n    });\n  });\n};\n\nconst ambossAnonId = () => {\n  return new Promise(resolve => {\n    pycmd('amboss:profile:anonId', result => {\n      resolve(result || null);\n    });\n  });\n};\n\nconst ambossUserId = () => {\n  return new Promise(resolve => {\n    pycmd('amboss:profile:userId', result => {\n      resolve(result || null);\n    });\n  });\n};\n\nconst ambossContextOptions = () => {\n  return new Promise(resolve => {\n    Promise.all([ambossAnkiVersion(), ambossAddonVersion(), ambossAnonId(), ambossUserId()]).then(values => {\n      const [ankiVersion, addonVersion, anonId, userId] = values;\n\n      const options = _objectSpread(_objectSpread(_objectSpread({}, anonId ? {\n        anonymousId: anonId\n      } : {}), userId ? {\n        userId: userId\n      } : {}), {}, {\n        context: {\n          app: {\n            name: 'anki-addon',\n            version: addonVersion,\n            hostVersion: ankiVersion,\n            stage: \"production\",\n            ambossLanguage: \"en\",\n            channel: \"ankiweb\"\n          }\n        }\n      });\n\n      resolve(options);\n    });\n  });\n};\n\nconst track = (name, properties = {}) => {\n  if (analytics) {\n    Promise.resolve(ambossContextOptions()).then((contextOptions = {}) => {\n      const {\n        userId,\n        anonymousId\n      } = contextOptions;\n      const analyticsUser = typeof analytics.user === 'function' ? analytics.user() : {};\n      const analyticsId = typeof analyticsUser.id === 'function' && analyticsUser.id();\n      const analyticsAnonymousId = typeof analyticsUser.anonymousId === 'function' && analyticsUser.anonymousId();\n      const reset = typeof analytics.reset === 'function' && analytics.reset;\n      const identify = typeof analytics.identify === 'function' && analytics.identify;\n      const setAnonymousId = typeof analytics.setAnonymousId === 'function' && analytics.setAnonymousId;\n\n      if (!userId && analyticsId && reset) {\n        reset();\n      } else if (userId && userId !== analyticsId && identify) {\n        identify(userId);\n      }\n\n      if (anonymousId && anonymousId !== analyticsAnonymousId && setAnonymousId) {\n        setAnonymousId(anonymousId);\n      }\n\n      analytics.track(`anki-addon.${name}`, properties, contextOptions);\n\n      if (false) {}\n    });\n  }\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbWJvc3NBZGRvbi5bbmFtZV0vLi9zcmMvd2ViL2FuYWx5dGljcy9hbmFseXRpY3MuanM/NDAwNyJdLCJuYW1lcyI6WyJkb2N1bWVudCIsIl9fZGVmaW5lR2V0dGVyX18iLCJhbmFseXRpY3MiLCJ3aW5kb3ciLCJpbml0aWFsaXplIiwiaW52b2tlZCIsIm1ldGhvZHMiLCJmYWN0b3J5IiwidCIsImUiLCJBcnJheSIsInByb3RvdHlwZSIsInNsaWNlIiwiY2FsbCIsImFyZ3VtZW50cyIsInVuc2hpZnQiLCJwdXNoIiwibGVuZ3RoIiwibG9hZCIsInRva2VuIiwib3B0aW9ucyIsImVuZHBvaW50IiwibiIsImNyZWF0ZUVsZW1lbnQiLCJ0eXBlIiwiYXN5bmMiLCJzcmMiLCJhIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJwYXJlbnROb2RlIiwiaW5zZXJ0QmVmb3JlIiwiX2xvYWRPcHRpb25zIiwiU05JUFBFVF9WRVJTSU9OIiwiQU1CT1NTX0FOQUxZVElDU19LRVkiLCJpbnRlZ3JhdGlvbnMiLCJBbGwiLCJBTUJPU1NfQU5BTFlUSUNTX1VSTCIsImFtYm9zc0Fua2lWZXJzaW9uIiwiUHJvbWlzZSIsInJlc29sdmUiLCJweWNtZCIsInJlc3VsdCIsImFtYm9zc0FkZG9uVmVyc2lvbiIsImFtYm9zc0Fub25JZCIsImFtYm9zc1VzZXJJZCIsImFtYm9zc0NvbnRleHRPcHRpb25zIiwiYWxsIiwidGhlbiIsInZhbHVlcyIsImFua2lWZXJzaW9uIiwiYWRkb25WZXJzaW9uIiwiYW5vbklkIiwidXNlcklkIiwiYW5vbnltb3VzSWQiLCJjb250ZXh0IiwiYXBwIiwibmFtZSIsInZlcnNpb24iLCJob3N0VmVyc2lvbiIsInN0YWdlIiwiQU1CT1NTX1NUQUdFIiwiYW1ib3NzTGFuZ3VhZ2UiLCJBTUJPU1NfTEFOR1VBR0UiLCJjaGFubmVsIiwiQU1CT1NTX0RJU1RSSUJVVElPTl9DSEFOTkVMIiwidHJhY2siLCJwcm9wZXJ0aWVzIiwiY29udGV4dE9wdGlvbnMiLCJhbmFseXRpY3NVc2VyIiwidXNlciIsImFuYWx5dGljc0lkIiwiaWQiLCJhbmFseXRpY3NBbm9ueW1vdXNJZCIsInJlc2V0IiwiaWRlbnRpZnkiLCJzZXRBbm9ueW1vdXNJZCIsIkFNQk9TU19ERUJVRyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBQSxRQUFRLENBQUNDLGdCQUFULENBQTBCLFFBQTFCLEVBQW9DLFlBQVk7QUFDOUMsU0FBTyxFQUFQO0FBQ0QsQ0FGRDs7QUFJQSxDQUFFLFlBQVk7QUFDWixNQUFJQyxTQUFTLEdBQUlDLE1BQU0sQ0FBQ0QsU0FBUCxHQUFtQkMsTUFBTSxDQUFDRCxTQUFQLElBQW9CLEVBQXhEOztBQUNBLE1BQUksQ0FBQ0EsU0FBUyxDQUFDRSxVQUFYLElBQXlCLENBQUNGLFNBQVMsQ0FBQ0csT0FBeEMsRUFBaUQ7QUFDL0NILGFBQVMsQ0FBQ0csT0FBVixHQUFvQixDQUFDLENBQXJCO0FBQ0FILGFBQVMsQ0FBQ0ksT0FBVixHQUFvQixDQUFDLE9BQUQsRUFBVSxnQkFBVixFQUE0QixVQUE1QixFQUF3QyxPQUF4QyxFQUFpRCxNQUFqRCxDQUFwQjs7QUFDQUosYUFBUyxDQUFDSyxPQUFWLEdBQW9CLFVBQVVDLENBQVYsRUFBYTtBQUMvQixhQUFPLFlBQVk7QUFDakIsWUFBSUMsQ0FBQyxHQUFHQyxLQUFLLENBQUNDLFNBQU4sQ0FBZ0JDLEtBQWhCLENBQXNCQyxJQUF0QixDQUEyQkMsU0FBM0IsQ0FBUjtBQUNBTCxTQUFDLENBQUNNLE9BQUYsQ0FBVVAsQ0FBVjtBQUNBTixpQkFBUyxDQUFDYyxJQUFWLENBQWVQLENBQWY7QUFDQSxlQUFPUCxTQUFQO0FBQ0QsT0FMRDtBQU1ELEtBUEQ7O0FBUUEsU0FBSyxJQUFJTSxDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxHQUFHTixTQUFTLENBQUNJLE9BQVYsQ0FBa0JXLE1BQXRDLEVBQThDVCxDQUFDLEVBQS9DLEVBQW1EO0FBQ2pELFVBQUlDLENBQUMsR0FBR1AsU0FBUyxDQUFDSSxPQUFWLENB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USxHQUFHLE9BQU94RSxTQUFTLENBQUN3RSxRQUFqQixLQUE4QixVQUE5QixJQUE0Q3hFLFNBQVMsQ0FBQ3dFLFFBQXZFO0FBQ0EsWUFBTUMsY0FBYyxHQUFHLE9BQU96RSxTQUFTLENBQUN5RSxjQUFqQixLQUFvQyxVQUFwQyxJQUFrRHpFLFNBQVMsQ0FBQ3lFLGNBQW5GOztBQUVBLFVBQUksQ0FBQ3ZCLE1BQUQsSUFBV2tCLFdBQVgsSUFBMEJHLEtBQTlCLEVBQXFDO0FBQ25DQSxhQUFLO0FBQ04sT0FGRCxNQUVPLElBQUlyQixNQUFNLElBQUlBLE1BQU0sS0FBS2tCLFdBQXJCLElBQW9DSSxRQUF4QyxFQUFrRDtBQUN2REEsZ0JBQVEsQ0FBQ3RCLE1BQUQsQ0FBUjtBQUNEOztBQUNELFVBQUlDLFdBQVcsSUFBSUEsV0FBVyxLQUFLbUIsb0JBQS9CLElBQXVERyxjQUEzRCxFQUEyRTtBQUN6RUEsc0JBQWMsQ0FBQ3RCLFdBQUQsQ0FBZDtBQUNEOztBQUVEbkQsZUFBUyxDQUFDK0QsS0FBVixDQUFpQixjQUFhVCxJQUFLLEVBQW5DLEVBQXNDVSxVQUF0QyxFQUFrREMsY0FBbEQ7O0FBRUEsVUFBSVMsS0FBSixFQUFrQixFQUVqQjtBQUNGLEtBeEJEO0FBeUJEO0FBQ0YsQ0E1Qk0iLCJmaWxlIjoiMS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIGRpc2FibGUgY29va2llc1xuZG9jdW1lbnQuX19kZWZpbmVHZXR0ZXJfXygnY29va2llJywgZnVuY3Rpb24gKCkge1xuICByZXR1cm4gJydcbn0pXG5cbiEoZnVuY3Rpb24gKCkge1xuICB2YXIgYW5hbHl0aWNzID0gKHdpbmRvdy5hbmFseXRpY3MgPSB3aW5kb3cuYW5hbHl0aWNzIHx8IFtdKVxuICBpZiAoIWFuYWx5dGljcy5pbml0aWFsaXplICYmICFhbmFseXRpY3MuaW52b2tlZCkge1xuICAgIGFuYWx5dGljcy5pbnZva2VkID0gITBcbiAgICBhbmFseXRpY3MubWV0aG9kcyA9IFsncmVzZXQnLCAnc2V0QW5vbnltb3VzSWQnLCAnaWRlbnRpZnknLCAndHJhY2snLCAncGFnZSddXG4gICAgYW5hbHl0aWNzLmZhY3RvcnkgPSBmdW5jdGlvbiAodCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGUgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpXG4gICAgICAgIGUudW5zaGlmdCh0KVxuICAgICAgICBhbmFseXRpY3MucHVzaChlKVxuICAgICAgICByZXR1cm4gYW5hbHl0aWNzXG4gICAgICB9XG4gICAgfVxuICAgIGZvciAodmFyIHQgPSAwOyB0IDwgYW5hbHl0aWNzLm1ldGhvZHMubGVuZ3RoOyB0KyspIHtcbiAgICAgIHZhciBlID0gYW5hbHl0aWNzLm1ldGhvZHNbdF1cbiAgICAgIGFuYWx5dGljc1tlXSA9IGFuYWx5dGljcy5mYWN0b3J5KGUpXG4gICAgfVxuICAgIGFuYWx5dGljcy5sb2FkID0gZnVuY3Rpb24gKHRva2VuLCBvcHRpb25zLCBlbmRwb2ludCkge1xuICAgICAgdmFyIG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKVxuICAgICAgbi50eXBlID0gJ3RleHQvamF2YXNjcmlwdCdcbiAgICAgIG4uYXN5bmMgPSAhMFxuICAgICAgbi5zcmMgPSBlbmRwb2ludCArIHRva2VuICsgJy9hLm1pbi5qcydcbiAgICAgIHZhciBhID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdXG4gICAgICBhLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG4sIGEpXG4gICAgICBhbmFseXRpY3MuX2xvYWRPcHRpb25zID0gb3B0aW9uc1xuICAgIH1cbiAgICBhbmFseXRpY3MuU05JUFBFVF9WRVJTSU9OID0gJzQuMS4wJ1xuICAgIGFuYWx5dGljcy5sb2FkKFxuICAgICAgQU1CT1NTX0FOQUxZVElDU19LRVksXG4gICAgICB7XG4gICAgICAgIGludGVncmF0aW9uczogeyBBbGw6IGZhbHNlLCAnU2VnbWVudC5pbyc6IHRydWUgfSxcbiAgICAgIH0sXG4gICAgICBBTUJPU1NfQU5BTFlUSUNTX1VSTFxuICAgIClcbiAgfVxufSkoKVxuXG5jb25zdCBhbWJvc3NBbmtpVmVyc2lvbiA9ICgpID0+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgcHljbWQoJ2FtYm9zczp2ZXJzaW9uOmFua2lWZXJzaW9uJywgKHJlc3VsdCkgPT4ge1xuICAgICAgcmVzb2x2ZShyZXN1bHQgfHwgJ3Vua25vd24nKVxuICAgIH0pXG4gIH0pXG59XG5cbmNvbnN0IGFtYm9zc0FkZG9uVmVyc2lvbiA9ICgpID0+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgcHljbWQoJ2FtYm9zczp2ZXJzaW9uOmFkZG9uVmVyc2lvbicsIChyZXN1bHQpID0+IHtcbiAgICAgIHJlc29sdmUocmVzdWx0IHx8ICd1bmtub3duJylcbiAgICB9KVxuICB9KVxufVxuXG5jb25zdCBhbWJvc3NBbm9uSWQgPSAoKSA9PiB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgIHB5Y21kKCdhbWJvc3M6cHJvZmlsZTphbm9uSWQnLCAocmVzdWx0KSA9PiB7XG4gICAgICByZXNvbHZlKHJlc3VsdCB8fCBudWxsKVxuICAgIH0pXG4gIH0pXG59XG5cbmNvbnN0IGFtYm9zc1VzZXJJZCA9ICgpID0+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgcHljbWQoJ2FtYm9zczpwcm9maWxlOnVzZXJJZCcsIChyZXN1bHQpID0+IHtcbiAgICAgIHJlc29sdmUocmVzdWx0IHx8IG51bGwpXG4gICAgfSlcbiAgfSlcbn1cblxuY29uc3QgYW1ib3NzQ29udGV4dE9wdGlvbnMgPSAoKSA9PiB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgIFByb21pc2UuYWxsKFthbWJvc3NBbmtpVmVyc2lvbigpLCBhbWJvc3NBZGRvblZlcnNpb24oKSwgYW1ib3NzQW5vbklkKCksIGFtYm9zc1VzZXJJZCgpXSkudGhlbigodmFsdWVzKSA9PiB7XG4gICAgICBjb25zdCBbYW5raVZlcnNpb24sIGFkZG9uVmVyc2lvbiwgYW5vbklkLCB1c2VySWRdID0gdmFsdWVzXG4gICAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICAuLi4oYW5vbklkID8geyBhbm9ueW1vdXNJZDogYW5vbklkIH0gOiB7fSksXG4gICAgICAgIC4uLih1c2VySWQgPyB7IHVzZXJJZDogdXNlcklkIH0gOiB7fSksXG4gICAgICAgIGNvbnRleHQ6IHtcbiAgICAgICAgICBhcHA6IHtcbiAgICAgICAgICAgIG5hbWU6ICdhbmtpLWFkZG9uJyxcbiAgICAgICAgICAgIHZlcnNpb246IGFkZG9uVmVyc2lvbixcbiAgICAgICAgICAgIGhvc3RWZXJzaW9uOiBhbmtpVmVyc2lvbixcbiAgICAgICAgICAgIHN0YWdlOiBBTUJPU1NfU1RBR0UsXG4gICAgICAgICAgICBhbWJvc3NMYW5ndWFnZTogQU1CT1NTX0xBTkdVQUdFLFxuICAgICAgICAgICAgY2hhbm5lbDogQU1CT1NTX0RJU1RSSUJVVElPTl9DSEFOTkVMLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9XG4gICAgICByZXNvbHZlKG9wdGlvbnMpXG4gICAgfSlcbiAgfSlcbn1cblxuZXhwb3J0IGNvbnN0IHRyYWNrID0gKG5hbWUsIHByb3BlcnRpZXMgPSB7fSkgPT4ge1xuICBpZiAoYW5hbHl0aWNzKSB7XG4gICAgUHJvbWlzZS5yZXNvbHZlKGFtYm9zc0NvbnRleHRPcHRpb25zKCkpLnRoZW4oKGNvbnRleHRPcHRpb25zID0ge30pID0+IHtcbiAgICAgIGNvbnN0IHsgdXNlcklkLCBhbm9ueW1vdXNJZCB9ID0gY29udGV4dE9wdGlvbnNcbiAgICAgIGNvbnN0IGFuYWx5dGljc1VzZXIgPSB0eXBlb2YgYW5hbHl0aWNzLnVzZXIgPT09ICdmdW5jdGlvbicgPyBhbmFseXRpY3MudXNlcigpIDoge31cbiAgICAgIGNvbnN0IGFuYWx5dGljc0lkID0gdHlwZW9mIGFuYWx5dGljc1VzZXIuaWQgPT09ICdmdW5jdGlvbicgJiYgYW5hbHl0aWNzVXNlci5pZCgpXG4gICAgICBjb25zdCBhbmFseXRpY3NBbm9ueW1vdXNJZCA9IHR5cGVvZiBhbmFseXRpY3NVc2VyLmFub255bW91c0lkID09PSAnZnVuY3Rpb24nICYmIGFuYWx5dGljc1VzZXIuYW5vbnltb3VzSWQoKVxuXG4gICAgICBjb25zdCByZXNldCA9IHR5cGVvZiBhbmFseXRpY3MucmVzZXQgPT09ICdmdW5jdGlvbicgJiYgYW5hbHl0aWNzLnJlc2V0XG4gICAgICBjb25zdCBpZGVudGlmeSA9IHR5cGVvZiBhbmFseXRpY3MuaWRlbnRpZnkgPT09ICdmdW5jdGlvbicgJiYgYW5hbHl0aWNzLmlkZW50aWZ5XG4gICAgICBjb25zdCBzZXRBbm9ueW1vdXNJZCA9IHR5cGVvZiBhbmFseXRpY3Muc2V0QW5vbnltb3VzSWQgPT09ICdmdW5jdGlvbicgJiYgYW5hbHl0aWNzLnNldEFub255bW91c0lkXG5cbiAgICAgIGlmICghdXNlcklkICYmIGFuYWx5dGljc0lkICYmIHJlc2V0KSB7XG4gICAgICAgIHJlc2V0KClcbiAgICAgIH0gZWxzZSBpZiAodXNlcklkICYmIHVzZXJJZCAhPT0gYW5hbHl0aWNzSWQgJiYgaWRlbnRpZnkpIHtcbiAgICAgICAgaWRlbnRpZnkodXNlcklkKVxuICAgICAgfVxuICAgICAgaWYgKGFub255bW91c0lkICYmIGFub255bW91c0lkICE9PSBhbmFseXRpY3NBbm9ueW1vdXNJZCAmJiBzZXRBbm9ueW1vdXNJZCkge1xuICAgICAgICBzZXRBbm9ueW1vdXNJZChhbm9ueW1vdXNJZClcbiAgICAgIH1cblxuICAgICAgYW5hbHl0aWNzLnRyYWNrKGBhbmtpLWFkZG9uLiR7bmFtZX1gLCBwcm9wZXJ0aWVzLCBjb250ZXh0T3B0aW9ucylcblxuICAgICAgaWYgKEFNQk9TU19ERUJVRykge1xuICAgICAgICBjb25zb2xlLmxvZyhgdHJhY2soJHtuYW1lfSwgJHtKU09OLnN0cmluZ2lmeShwcm9wZXJ0aWVzKX0sICR7SlNPTi5zdHJpbmdpZnkoY29udGV4dE9wdGlvbnMpfSlgKVxuICAgICAgfVxuICAgIH0pXG4gIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///1\n")}]);